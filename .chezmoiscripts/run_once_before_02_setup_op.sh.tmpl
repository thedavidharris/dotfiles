{{ if eq .chezmoi.os "darwin" -}}
#!/usr/bin/env bash

set -euo pipefail

# Simple check: ensure op exists and is signed in. If not, instruct the user to run `op signin`.
if ! command -v op >/dev/null 2>&1; then
    echo "1Password CLI (op) not found. Please install it (for example: 'brew install 1password-cli') and re-run this script."
    exit 1
fi

if op whoami >/dev/null 2>&1; then
    echo "1Password CLI already signed in."
    exit 0
fi

echo "1Password CLI is not signed in. Please run 'op signin' (interactive) and then re-run this script."
exit 1
{{ end -}}
